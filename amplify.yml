version: 1
frontend:
  phases:
    preBuild:
      commands:
        - gem install bundler
        - bundle config set path 'vendor/bundle'
        - bundle install
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: _site
    files:
      - "**/*"
  cache:
    paths:
      - vendor/bundle/**/*
      - Gemfile.lock
      - node_modules
  notifications:
    - type: SNS
      topicArn: arn:aws:sns:us-east-1:360364660870:innovation-site-build-success
      event: "BUILD_SUCCESS"
    - type: SNS
      topicArn: arn:aws:sns:us-east-1:360364660870:innovation-site-build-failure
      event: "BUILD_FAILURE"
